(function(e){function n(n){for(var o,s,a=n[0],c=n[1],u=n[2],l=0,f=[];l<a.length;l++)s=a[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(n);while(f.length)f.shift()();return i.push.apply(i,u||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],o=!0,s=1;s<t.length;s++){var c=t[s];0!==r[c]&&(o=!1)}o&&(i.splice(n--,1),e=a(a.s=t[0]))}return e}var o={},r={app:0},i=[];function s(e){return a.p+"js/"+({game:"game"}[e]||e)+"."+{game:"fbf17b18"}[e]+".js"}function a(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(e){var n=[],t=r[e];if(0!==t)if(t)n.push(t[2]);else{var o=new Promise((function(n,o){t=r[e]=[n,o]}));n.push(t[2]=o);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=s(e);var u=new Error;i=function(n){c.onerror=c.onload=null,clearTimeout(l);var t=r[e];if(0!==t){if(t){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",u.name="ChunkLoadError",u.type=o,u.request=i,t[1](u)}r[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(n)},a.m=e,a.c=o,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)a.d(t,o,function(n){return e[n]}.bind(null,o));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="",a.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var d=u;i.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";t("85ec")},1:function(e,n){},2:function(e,n){},3:function(e,n){},4399:function(e,n,t){"use strict";t("c7ee")},"56d7":function(e,n,t){"use strict";t.r(n),t.d(n,"bus",(function(){return J}));t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",[t("v-main",[t("Game")],1)],1)},i=[],s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-container",{staticClass:"pa-0 ma-0 mb-0"},[t("div",{staticClass:"grid-container",style:"--height: "+e.gridRowGamenHeight},[t("v-btn",{ref:"answer1",attrs:{color:"green darken-1",text:"",focus:""},on:{click:function(n){return e.startGame("PlayScene")}}},[e._v(" PlayScene ")]),t("v-btn",{ref:"answer1",attrs:{color:"green darken-1",text:"",focus:""},on:{click:function(n){return e.startGame("DungeonScene")}}},[e._v(" DungeonScene ")]),e.downloaded?t("div",{staticClass:"game",attrs:{id:e.containerId}}):t("div",{staticClass:"placeholder"},[e._v(" Downloading ... ")]),e.selectGame?t("div",{staticClass:"controller"},[t("div",{staticClass:"jump"},[t("button",{staticClass:"buttonAction",on:{click:function(n){return e.move("jump")}}},[e._v(" Sauter ")])]),t("div",{staticClass:"move_left"},[t("button",{staticClass:"buttonAction",on:{mousedown:function(n){return e.move("left_down")},mouseup:function(n){return e.move("left_up")},touchstart:function(n){return e.touch_move("left_down")},touchend:function(n){return e.touch_move("left_down")}}},[e._v(" Gauche ")])]),t("div",{staticClass:"move_right"},[t("button",{staticClass:"buttonAction",on:{mousedown:function(n){return e.move("right_down")},mouseup:function(n){return e.move("right_up")},touchstart:function(n){return e.touch_move("right_down")},touchend:function(n){return e.touch_move("right_down")}}},[e._v(" Droite ")])])]):e._e(),t("v-dialog",{staticClass:"mx-auto ",on:{keyup:e.keymonitor},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v(" Question pour un champion ! ")]),t("v-card-text",[e._v(" Ici il faut créer une question vis à vis du coffre ouvert. A chaque bonne réponse tu gagnes des points "),t("v-row",{staticClass:"mx-auto",attrs:{"no-gutters":""}},[t("v-col",{staticClass:"mx-auto",attrs:{"no-gutters":"",md:"6"}},[t("v-btn",{ref:"answer1",attrs:{color:"green darken-1",text:"",focus:""},on:{click:function(n){e.dialog=!1}}},[e._v(" Réponse 1 ")]),t("v-btn",{ref:"answer2",attrs:{color:"green darken-1",text:""},on:{click:function(n){e.dialog=!1}}},[e._v(" Réponse 2 ")])],1)],1),t("v-row",{staticClass:"mx-auto",attrs:{"no-gutters":""}},[t("v-col",{staticClass:"mx-auto",attrs:{"no-gutters":"",md:"6"}},[t("v-btn",{ref:"answer3",attrs:{color:"green darken-1",text:""},on:{click:function(n){e.dialog=!1}}},[e._v(" Réponse 3 ")]),t("v-btn",{ref:"answer4",attrs:{color:"green darken-1",text:""},on:{click:function(n){e.dialog=!1}}},[e._v(" Réponse 4 ")])],1)],1)],1),t("v-card-actions")],1)],1)],1)])},a=[],c=(t("d3b7"),t("96cf"),t("1da1")),u=null;function l(){return d.apply(this,arguments)}function d(){return d=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var o=t("ac69");o.list((function(t,o){return t?n(t):e(o)}))})));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){var n=t("ac69");u=new n(e,{baudRate:9600})}function g(){u.on("error",(function(e){console.log("Error: ",e.message)})),u.on("readable",(function(){console.log("Data:",u.read())}))}var m=t("9029"),h=t("8055"),w=t.n(h),p=t("7e3c").w3cwebsocket,v=null,b=!1;v=b?w()("http://192.168.1.3:9092"):new p("ws://127.0.0.1:9091","");var x=v,y={name:"Game",data:function(){return{gameIsLaunchInMobile:m["isMobile"],downloaded:!1,selectGame:!1,gameInstance:null,game:null,containerId:"game-container",gridRowGamenHeight:"90%",gameScreenHeight:window.innerHeight-window.innerHeight/10,gameScreenWidth:window.innerWidth,useElectronWithSerialPort:!1,dialog:!1,currentPositionAnswser:1}},watch:{"$store.state.msgBox.state":function(){if(this.$store.state.msgBox.state){this.gameInstance.scene.pause(this.$store.state.msgBox.sceneName),this.dialog=!0;var e=this;setTimeout((function(){console.log(e.$refs.answer1),e.$refs.answer1.$el.focus()}),100)}},"$store.state.restart":function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:1==this.$store.state.restart&&window.location.reload();case 1:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),dialog:function(){0==this.dialog&&(this.gameInstance.scene.wake(this.$store.state.msgBox.sceneName),this.$store.commit("disableMessageBox",""))}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.useElectronWithSerialPort){n.next=7;break}return n.next=3,l();case 3:o=n.sent,console.log(o),f("COM10"),g();case 7:return n.next=9,t.e("game").then(t.bind(null,"8fd0"));case 9:e.game=n.sent,e.downloaded=!0,x.onerror=function(){console.log("Connection Error"),alert("WebSocket Client err")},x.onopen=function(){console.log("WebSocket Client Connected"),alert("WebSocket Client Connected")},x.onclose=function(){console.log("echo-protocol Client Closed")},r=e,x.onmessage=function(e){"string"===typeof e.data&&(console.log("Received: '"+e.data+"'"),0==r.dialog?(r.gameInstance.registry.events.emit("MOVE",e.data),r.currentPositionAnswser=1):"right_down"==e.data?1==r.currentPositionAnswser?(r.$refs.answer2.$el.focus(),r.currentPositionAnswser=2):(r.$refs.answer4.$el.focus(),r.currentPositionAnswser=4):"left_down"==e.data?2==r.currentPositionAnswser?(r.$refs.answer1.$el.focus(),r.currentPositionAnswser=1):(r.$refs.answer3.$el.focus(),r.currentPositionAnswser=3):"key_down"==e.data?1==r.currentPositionAnswser?(r.$refs.answer3.$el.focus(),r.currentPositionAnswser=3):(r.$refs.answer4.$el.focus(),r.currentPositionAnswser=4):"key_up"==e.data?3==r.currentPositionAnswser?(r.$refs.answer1.$el.focus(),r.currentPositionAnswser=1):(r.$refs.answer2.$el.focus(),r.currentPositionAnswser=2):"key_a"==e.data&&(r.dialog=!1,3==r.currentPositionAnswser&&console.log("Bonne réponse")))};case 16:case"end":return n.stop()}}),n)})))()},methods:{resizeController:function(){window.innerHeight/10<30?(this.gridRowGamenHeight="75%",this.gameScreenHeight=window.innerHeight-window.innerHeight/30):window.innerHeight/10<40?(this.gridRowGamenHeight="80%",this.gameScreenHeight=window.innerHeight-window.innerHeight/20):window.innerHeight/10<50&&(this.gridRowGamenHeight="85%",this.gameScreenHeight=window.innerHeight-window.innerHeight/15)},startGame:function(e){this.selectGame=!1,"DungeonScene"==e?(this.gridRowGamenHeight="100%",this.gameScreenHeight=window.innerHeight):"PlayScene"==e&&(this.gridRowGamenHeight="90%",this.gameScreenHeight=window.innerHeight-window.innerHeight/10),this.gameInstance=this.game.launch(this.containerId,this.$store,this.gameScreenHeight,this.gameScreenWidth,e)},move:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:0==this.gameIsLaunchInMobile&&this.gameInstance.registry.events.emit("MOVE",n);case 1:case"end":return e.stop()}}),e,this)})));function n(n){return e.apply(this,arguments)}return n}(),touch_move:function(e){this.gameIsLaunchInMobile&&this.gameInstance.registry.events.emit("MOVE",e)},keymonitor:function(e){console.log(e.key),"Enter"==e.key&&console.log("enter key was pressed!")}},destroyed:function(){this.gameInstance.destroy(!1)}},_=y,k=(t("4399"),t("2877")),C=t("6544"),P=t.n(C),$=t("8336"),H=t("b0af"),S=t("99d9"),A=t("62ad"),R=t("a523"),O=t("169a"),j=t("0fd9"),I=Object(k["a"])(_,s,a,!1,null,"27fea498",null),B=I.exports;P()(I,{VBtn:$["a"],VCard:H["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:S["c"],VCol:A["a"],VContainer:R["a"],VDialog:O["a"],VRow:j["a"]});var G={name:"App",components:{Game:B},data:function(){return{}}},M=G,V=(t("034f"),t("7496")),E=t("f6c4"),T=Object(k["a"])(M,r,i,!1,null,null,null),W=T.exports;P()(T,{VApp:V["a"],VMain:E["a"]});var D=t("f309");o["a"].use(D["a"]);var N=new D["a"]({}),L=t("2f62");o["a"].use(L["a"]);var q=new L["a"].Store({state:{count:-1,msgBox:{state:!1,index:-1,sceneName:""},restart:-1},mutations:{initMessageBox:function(e){e.count=0},enableMessageBox:function(e,n){console.log(n),e.msgBox.state=!0,e.msgBox.index=10,e.msgBox.sceneName=n.data.sceneName,e.count++},disableMessageBox:function(e,n){console.log(n),e.msgBox.state=!1,e.msgBox.index=10,e.msgBox.sceneName="",e.count++},restart:function(e){console.log("value"),e.restart=1,e.count++}},actions:{},modules:{}});o["a"].config.productionTip=!1;var J=new o["a"];new o["a"]({vuetify:N,store:q,render:function(e){return e(W)}}).$mount("#app")},"85ec":function(e,n,t){},c7ee:function(e,n,t){}});
//# sourceMappingURL=app.c0cbdab7.js.map